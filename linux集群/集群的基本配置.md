#集群的基本配置

<!-- TOC depth:6 withLinks:1 updateOnSave:1 -->
- [集群的基本配置](#)
	- [IP配置](#ip)
	- [免密钥登陆](#)
<!-- /TOC -->

##IP配置
|电脑名|IP|网卡|备注|
|-|-|-|-|
|namenode|192.168.122.143/24|eth0||
|datanode1|
|datanode2|
|datanode3|


##免密钥登陆
1.  配置主机的hostname
使用`hostnamectl`命令：
	+ 查看主机的hostname信息：`hostnamectl status`
	+ 修改主机的hostname信息：`hostnamectl set-hostname "hgfx5"`

2.  配置ssh
在`/etc/ssh/sshd_config`中，添加如向两行：
  ```
RSAAuthentication yes
PubkeyAuthentication yes
```
使得主机ssh接受RSA认证。

  >`sshd_config` 和 `ssh_config`的区别：
  >1. `sshd_config`:配置服务器提供ssh服务的配置文件。
  >2. `ssh_config`：配置客户端通过ssh连接到本机的配置文件。

3.  修改相关目录权限并重起ssh服务
`.ssh`700
`authorized_keys` 600
`service sshd restart`

4.  还是需要登录密码的问题：
出现问题后，查看`/var/log/secure`
  1.  从A ssh连接到B，发现错误：`Address 192.168.1.106 maps to localhost, but this does not map back to the address - POSSIBLE BREAK-IN ATTEMPT!`。
  解决办法：在A的ssh客户端的配置文件中，修改`/etc/ssh/ssh_config`文件中的`GSSAPIAuthentication yes`为`GSSAPIAuthentication no`
	2.	登录时显示`No route to host`：两主机不再一个局域网下面，试试互相ping的通？

5.	pexpect实现自动免密钥登录
```
```
